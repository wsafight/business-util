# 复杂任务队列管理工具 better-queue

2018 年，我使用 websocket 为 OA 系统添加了推送消息的功能。期中，在系统刚刚登录时候，我会使用 api 获取当前未读的信息展示，此时如果直接调用 Element UI 消息组件会造成大量消息叠加在一起，无法查阅，因此自行书写了一个队列控制。

回头想一想，当年的代码非常的稚嫩，仅仅在内存中存入数据，然后定时取出，不过对于当前场景也够用了。

这一次我想介绍一款不错的队列管理代码库 [better-queue](https://github.com/diamondio/better-queue) ，该库专门服务 node 中复杂的任务的排序与执行。

## 功能点介绍

它具有非常多的功能，下面列举一下，后面逐步介绍。

- 队列控制，先进先出的调度方式，同时控制同时处理任务数。
- 任务管理，为插入的任务生成唯一 key 值，可以跟踪耗时任务（适合当前无法立即返回结果的异步 api 请求）。
- 提供辅助功能：过滤，验证，优先级控制，批处理等功能。
- 提供内部控制：超时，重试，前提（如果前提条件失败，它将继续调用此函数，直到再次通过，才会进行下一个），取消，中止，暂停，继续 等功能。
- 面向接口，可以自定义 store，可以把当前的数据放入内存或者数据库（官方提供 SQLite 和 PostgreSQL）。  
- 检查队列，提供统计信息与数据。


## 修改构建

目前我正在使用 ts 进行重构，希望可以服务于 node 以及 deno 多个平台。

<div style="float: right">更新时间: {docsify-updated}</div>
